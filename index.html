<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vertex Monaco | Expert Vision</title>
    <style>
        :root { 
            --vertex-cyan: #00CCFF; 
            --dark-gray: #1a1a1a;
            --light-gray: #f8f9fa;
        }
        
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background: #000; }
        
        #video-preview { position: absolute; width: 100%; height: 100%; object-fit: cover; }

        /* Interface minimaliste */
        .ui-layer { position: absolute; inset: 0; z-index: 10; display: flex; flex-direction: column; justify-content: space-between; pointer-events: none; }

        .top-nav { background: rgba(0,0,0,0.7); padding: 25px; text-align: center; border-bottom: 0.5px solid rgba(255,255,255,0.1); }
        .logo { color: white; letter-spacing: 6px; font-weight: 200; font-size: 14px; margin-bottom: 5px; }
        .instruction { color: var(--vertex-cyan); font-size: 16px; font-weight: 500; }

        /* Viseur */
        .scanner-target {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 40px; height: 40px; border: 1px solid rgba(255,255,255,0.5); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }
        .scanner-target::after { content: ''; width: 4px; height: 4px; background: var(--vertex-cyan); border-radius: 50%; }

        /* Panneau de résultat élégant */
        #result-card {
            background: white; margin: 20px; padding: 25px; border-radius: 12px;
            transform: translateY(120%); transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            pointer-events: auto; box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        .card-show { transform: translateY(0) !important; }

        .btn-primary {
            background: var(--dark-gray); color: white; border: none; width: 100%;
            padding: 18px; border-radius: 8px; font-weight: 600; font-size: 14px;
            letter-spacing: 1px; cursor: pointer; pointer-events: auto; margin-bottom: 40px;
        }

        .btn-ar {
            background: var(--vertex-cyan); color: white; text-decoration: none;
            display: block; text-align: center; padding: 15px; border-radius: 8px;
            font-weight: bold; margin-top: 15px;
        }

        /* Points marqués sur l'écran */
        .marker {
            position: absolute; width: 12px; height: 12px; background: var(--vertex-cyan);
            border: 2px solid white; border-radius: 50%; z-index: 9; transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>

    <video id="video-preview" autoplay playsinline></video>

    <div class="ui-layer">
        <div class="top-nav">
            <div class="logo">VERTEX MONACO</div>
            <div id="step-msg" class="instruction">Visez le bord GAUCHE de l'emplacement</div>
        </div>

        <div class="scanner-target"></div>

        <div style="padding: 20px;">
            <button id="main-btn" class="btn-primary">MARQUER LE POINT</button>
        </div>

        <div id="result-card">
            <h3 style="margin-top:0; color:var(--dark-gray)">Diagnostic d'installation</h3>
            <p style="font-size: 14px; color: #666;">L'espace mesuré permet l'installation du matériel suivant :</p>
            
            <div style="border-top: 1px solid #eee; padding: 15px 0;">
                <strong style="color:var(--dark-gray)">Double-Face 55" Haute Lum.</strong>
                <span style="float:right; color:#27ae60">100% Compatible</span>
            </div>

            <a href="intent://arvr.google.com/scene-viewer/1.0?file=https://sarlvertex.github.io/fiches-techniques/Double-Face 55_.glb#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=https://developers.google.com/ar;end;" class="btn-ar">
                VOIR LE TOTEM EN 3D ICI
            </a>
            
            <button onclick="location.reload()" style="background:none; border:none; color:#999; width:100%; margin-top:10px; font-size:12px;">Refaire la mesure</button>
        </div>
    </div>

    <script>
        const btn = document.getElementById('main-btn');
        const msg = document.getElementById('step-msg');
        const card = document.getElementById('result-card');
        let step = 0;

        navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
            .then(stream => { document.getElementById('video-preview').srcObject = stream; });

        btn.onclick = () => {
            if (navigator.vibrate) navigator.vibrate(50);
            step++;

            if (step === 1) {
                msg.innerText = "Visez le bord DROIT de l'emplacement";
                btn.innerText = "VALIDER LA LARGEUR";
            } else if (step === 2) {
                msg.innerText = "ANALYSE TERMINÉE";
                btn.style.display = "none";
                card.classList.add('card-show');
            }
        };
    </script>
</body>
</html>
