<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vertex Monaco | Expert Survey Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --gold: #D4AF37; 
            --gold-dark: #B8860B;
            --bg: #050505;
            --card: #121212;
            --text: #ffffff;
        }

        body { 
            margin: 0; background: var(--bg); color: var(--text); 
            font-family: 'Inter', sans-serif; line-height: 1.6;
        }

        .container { max-width: 600px; margin: 0 auto; padding: 20px; padding-bottom: 100px; }

        /* Header */
        .header { 
            text-align: center; padding: 40px 0; border-bottom: 1px solid rgba(212, 175, 55, 0.2); 
            margin-bottom: 40px;
        }
        .header h1 { letter-spacing: 8px; font-size: 16px; color: var(--gold); font-weight: 900; margin: 0; }
        .header p { font-size: 10px; opacity: 0.5; margin-top: 10px; letter-spacing: 2px; }

        /* Navigation par étapes */
        .step { display: none; animation: fadeIn 0.5s ease forwards; }
        .step.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Formulaire Style */
        .field-group { margin-bottom: 25px; }
        label { display: block; margin-bottom: 8px; font-size: 11px; font-weight: 700; color: var(--gold); letter-spacing: 1px; text-transform: uppercase; }
        
        input, select, textarea { 
            width: 100%; padding: 18px; background: var(--card); border: 1px solid #222; 
            color: white; border-radius: 4px; font-size: 16px; box-sizing: border-box;
            transition: border-color 0.3s;
        }
        input:focus { border-color: var(--gold); outline: none; }

        /* Boutons */
        .btn-group { display: flex; gap: 10px; margin-top: 30px; }
        .btn-gold { 
            flex: 2; padding: 20px; background: linear-gradient(135deg, var(--gold), var(--gold-dark)); 
            color: black; border: none; font-weight: 900; letter-spacing: 2px; border-radius: 4px; cursor: pointer;
        }
        .btn-outline { 
            flex: 1; padding: 20px; background: transparent; color: white; 
            border: 1px solid #333; font-weight: 700; border-radius: 4px; cursor: pointer;
        }

        /* Photo Module */
        .photo-box {
            width: 100%; min-height: 250px; background: #111; border: 1px dashed var(--gold);
            border-radius: 8px; display: flex; align-items: center; justify-content: center;
            margin-bottom: 15px; overflow: hidden; position: relative;
        }
        #photo-preview { width: 100%; height: 100%; object-fit: cover; }
        
        /* Rapport Final */
        .summary-item { background: var(--card); padding: 15px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid var(--gold); }
        .summary-item strong { color: var(--gold); font-size: 12px; display: block; }

        @media print {
            .btn-group, .header p { display: none; }
            body { background: white; color: black; }
            .summary-item { border: 1px solid #eee; color: black; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>VERTEX MONACO</h1>
        <p>RELEVÉ TECHNIQUE DIGITAL SIGNAGE</p>
    </div>

    <div class="step active" id="step1">
        <div class="field-group">
            <label>Client / Projet</label>
            <input type="text" id="client_name" placeholder="ex: Casino de Monte-Carlo">
        </div>
        <div class="field-group">
            <label>Collaborateur Vertex</label>
            <input type="text" id="staff_name" placeholder="Votre nom">
        </div>
        <div class="btn-group">
            <button class="btn-gold" onclick="nextStep(2)">COMMENCER LE RELEVÉ</button>
        </div>
    </div>

    <div class="step" id="step2">
        <div class="field-group">
            <label>Largeur de la Vitrine (cm)</label>
            <input type="number" id="w_cm" placeholder="ex: 120">
        </div>
        <div class="field-group">
            <label>Hauteur de la Vitrine (cm)</label>
            <input type="number" id="h_cm" placeholder="ex: 240">
        </div>
        <div class="field-group">
            <label>Type de Support</label>
            <select id="support_type">
                <option value="Vitre">Fixation Vitre (Ventouse/Colle)</option>
                <option value="Sol">Pose au Sol (Autoporté)</option>
                <option value="Plafond">Suspension Plafond</option>
                <option value="Mur">Fixation Murale</option>
            </select>
        </div>
        <div class="btn-group">
            <button class="btn-outline" onclick="nextStep(1)">RETOUR</button>
            <button class="btn-gold" onclick="nextStep(3)">SUIVANT</button>
        </div>
    </div>

    <div class="step" id="step3">
        <div class="field-group">
            <label>Alimentation Électrique</label>
            <select id="elec">
                <option value="Disponible">Prise disponible immédiatement</option>
                <option value="À créer">Travaux d'électricité à prévoir</option>
            </select>
        </div>
        <div class="field-group">
            <label>Connexion Internet</label>
            <select id="net">
                <option value="WiFi">Wi-Fi Client</option>
                <option value="Ethernet">Câble RJ45 disponible</option>
                <option value="4G/5G">Routeur 4G/5G Vertex Requis</option>
            </select>
        </div>
        <div class="btn-group">
            <button class="btn-outline" onclick="nextStep(2)">RETOUR</button>
            <button class="btn-gold" onclick="nextStep(4)">SUIVANT</button>
        </div>
    </div>

    <div class="step" id="step4">
        <label>Photo de l'emplacement</label>
        <div class="photo-box">
            <img id="photo-preview" src="" alt="" style="display:none;">
            <span id="photo-msg">AUCUN CLICHÉ</span>
        </div>
        <input type="file" id="cam-file" accept="image/*" capture="environment" style="display:none;">
        <button class="btn-outline" onclick="document.getElementById('cam-file').click()" style="width:100%; border-color:var(--gold); color:var(--gold);">
            OUVRIR L'APPAREIL PHOTO
        </button>
        
        <div class="btn-group">
            <button class="btn-outline" onclick="nextStep(3)">RETOUR</button>
            <button class="btn-gold" onclick="finishSurvey()">GÉNÉRER LE RAPPORT</button>
        </div>
    </div>

    <div class="step" id="step-final">
        <h2 style="color:var(--gold); margin-bottom:20px;">DIAGNOSTIC VALIDÉ</h2>
        <div id="final-report"></div>
        <div class="btn-group">
            <button class="btn-gold" onclick="window.print()">IMPRIMER / PDF</button>
        </div>
        <button class="btn-outline" onclick="location.reload()" style="width:100%; margin-top:10px;">NOUVEAU RELEVÉ</button>
    </div>
</div>

<script>
    let capturedImage = "";

    function nextStep(n) {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('step' + n).classList.add('active');
        window.scrollTo(0,0);
    }

    // Gestion de la photo
    document.getElementById('cam-file').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                capturedImage = event.target.result;
                const img = document.getElementById('photo-preview');
                img.src = capturedImage;
                img.style.display = 'block';
                document.getElementById('photo-msg').style.display = 'none';
            }
            reader.readAsDataURL(file);
        }
    });

    function finishSurvey() {
        const results = {
            "Client": document.getElementById('client_name').value,
            "Technicien": document.getElementById('staff_name').value,
            "Dimensions": document.getElementById('w_cm').value + " x " + document.getElementById('h_cm').value + " cm",
            "Support": document.getElementById('support_type').value,
            "Électricité": document.getElementById('elec').value,
            "Réseau": document.getElementById('net').value,
            "Date": new Date().toLocaleDateString('fr-FR')
        };

        let html = "";
        for (const [key, val] of Object.entries(results)) {
            html += `<div class="summary-item"><strong>${key}</strong>${val}</div>`;
        }
        
        if(capturedImage) {
            html += `<div class="summary-item"><strong>Photo du site</strong><img src="${capturedImage}" style="width:100%; margin-top:10px; border-radius:4px;"></div>`;
        }

        document.getElementById('final-report').innerHTML = html;
        nextStep('-final');
    }
</script>

</body>
</html>
